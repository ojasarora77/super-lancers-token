import { Fr } from '@aztec/foundation/fields';
import { MAX_NEW_COMMITMENTS_PER_CALL, MAX_NEW_L2_TO_L1_MSGS_PER_CALL, MAX_NEW_NULLIFIERS_PER_CALL, MAX_PENDING_READ_REQUESTS_PER_CALL, MAX_PRIVATE_CALL_STACK_LENGTH_PER_CALL, MAX_PUBLIC_CALL_STACK_LENGTH_PER_CALL, MAX_READ_REQUESTS_PER_CALL, NUM_FIELDS_PER_SHA256, RETURN_VALUES_LENGTH, } from '../cbind/constants.gen.js';
import { makeTuple } from '../utils/jsUtils.js';
import { serializeToBuffer } from '../utils/serialize.js';
import { CallContext } from './call_context.js';
import { HistoricBlockData } from './index.js';
import { ContractDeploymentData } from './tx_context.js';
/**
 * Public inputs to a private circuit.
 * @see abis/private_circuit_public_inputs.hpp.
 */
export class PrivateCircuitPublicInputs {
    constructor(
    /**
     * Context of the call corresponding to this private circuit execution.
     */
    callContext, 
    /**
     * Pedersen hash of function arguments.
     */
    argsHash, 
    /**
     * Return values of the corresponding function call.
     */
    returnValues, 
    /**
     * Read requests created by the corresponding function call.
     */
    readRequests, 
    /**
     * Pending read requests created by the corresponding function call.
     */
    pendingReadRequests, 
    /**
     * New commitments created by the corresponding function call.
     */
    newCommitments, 
    /**
     * New nullifiers created by the corresponding function call.
     */
    newNullifiers, 
    /**
     * The commitments those were nullified by the above newNullifiers.
     */
    nullifiedCommitments, 
    /**
     * Private call stack at the current kernel iteration.
     */
    privateCallStack, 
    /**
     * Public call stack at the current kernel iteration.
     */
    publicCallStack, 
    /**
     * New L2 to L1 messages created by the corresponding function call.
     */
    newL2ToL1Msgs, 
    /**
     * Hash of the encrypted logs emitted in this function call.
     * Note: Represented as an array of 2 fields in order to fit in all of the 256 bits of sha256 hash.
     */
    encryptedLogsHash, 
    /**
     * Hash of the unencrypted logs emitted in this function call.
     * Note: Represented as an array of 2 fields in order to fit in all of the 256 bits of sha256 hash.
     */
    unencryptedLogsHash, 
    /**
     * Length of the encrypted log preimages emitted in this function call.
     * Note: Here so that the gas cost of this request can be measured by circuits, without actually needing to feed
     *       in the variable-length data.
     */
    encryptedLogPreimagesLength, 
    /**
     * Length of the unencrypted log preimages emitted in this function call.
     */
    unencryptedLogPreimagesLength, 
    /**
     * Historic roots of the data trees, used to calculate the block hash the user is proving against.
     */
    historicBlockData, 
    /**
     * Deployment data of contracts being deployed in this kernel iteration.
     */
    contractDeploymentData, 
    /**
     * Chain Id of the instance.
     */
    chainId, 
    /**
     * Version of the instance.
     */
    version) {
        this.callContext = callContext;
        this.argsHash = argsHash;
        this.returnValues = returnValues;
        this.readRequests = readRequests;
        this.pendingReadRequests = pendingReadRequests;
        this.newCommitments = newCommitments;
        this.newNullifiers = newNullifiers;
        this.nullifiedCommitments = nullifiedCommitments;
        this.privateCallStack = privateCallStack;
        this.publicCallStack = publicCallStack;
        this.newL2ToL1Msgs = newL2ToL1Msgs;
        this.encryptedLogsHash = encryptedLogsHash;
        this.unencryptedLogsHash = unencryptedLogsHash;
        this.encryptedLogPreimagesLength = encryptedLogPreimagesLength;
        this.unencryptedLogPreimagesLength = unencryptedLogPreimagesLength;
        this.historicBlockData = historicBlockData;
        this.contractDeploymentData = contractDeploymentData;
        this.chainId = chainId;
        this.version = version;
    }
    /**
     * Create PrivateCircuitPublicInputs from a fields dictionary.
     * @param fields - The dictionary.
     * @returns A PrivateCircuitPublicInputs object.
     */
    static from(fields) {
        return new PrivateCircuitPublicInputs(...PrivateCircuitPublicInputs.getFields(fields));
    }
    /**
     * Create an empty PrivateCircuitPublicInputs.
     * @returns An empty PrivateCircuitPublicInputs object.
     */
    static empty() {
        return new PrivateCircuitPublicInputs(CallContext.empty(), Fr.ZERO, makeTuple(RETURN_VALUES_LENGTH, Fr.zero), makeTuple(MAX_READ_REQUESTS_PER_CALL, Fr.zero), makeTuple(MAX_PENDING_READ_REQUESTS_PER_CALL, Fr.zero), makeTuple(MAX_NEW_COMMITMENTS_PER_CALL, Fr.zero), makeTuple(MAX_NEW_NULLIFIERS_PER_CALL, Fr.zero), makeTuple(MAX_NEW_NULLIFIERS_PER_CALL, Fr.zero), makeTuple(MAX_PRIVATE_CALL_STACK_LENGTH_PER_CALL, Fr.zero), makeTuple(MAX_PUBLIC_CALL_STACK_LENGTH_PER_CALL, Fr.zero), makeTuple(MAX_NEW_L2_TO_L1_MSGS_PER_CALL, Fr.zero), makeTuple(NUM_FIELDS_PER_SHA256, Fr.zero), makeTuple(NUM_FIELDS_PER_SHA256, Fr.zero), Fr.ZERO, Fr.ZERO, HistoricBlockData.empty(), ContractDeploymentData.empty(), Fr.ZERO, Fr.ZERO);
    }
    /**
     * Serialize into a field array. Low-level utility.
     * @param fields - Object with fields.
     * @returns The array.
     */
    static getFields(fields) {
        return [
            // NOTE: Must have same order as CPP.
            fields.callContext,
            fields.argsHash,
            fields.returnValues,
            fields.readRequests,
            fields.pendingReadRequests,
            fields.newCommitments,
            fields.newNullifiers,
            fields.nullifiedCommitments,
            fields.privateCallStack,
            fields.publicCallStack,
            fields.newL2ToL1Msgs,
            fields.encryptedLogsHash,
            fields.unencryptedLogsHash,
            fields.encryptedLogPreimagesLength,
            fields.unencryptedLogPreimagesLength,
            fields.historicBlockData,
            fields.contractDeploymentData,
            fields.chainId,
            fields.version,
        ];
    }
    /**
     * Serialize this as a buffer.
     * @returns The buffer.
     */
    toBuffer() {
        return serializeToBuffer(...PrivateCircuitPublicInputs.getFields(this));
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJpdmF0ZV9jaXJjdWl0X3B1YmxpY19pbnB1dHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvc3RydWN0cy9wcml2YXRlX2NpcmN1aXRfcHVibGljX2lucHV0cy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsRUFBRSxFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFHOUMsT0FBTyxFQUNMLDRCQUE0QixFQUM1Qiw4QkFBOEIsRUFDOUIsMkJBQTJCLEVBQzNCLGtDQUFrQyxFQUNsQyxzQ0FBc0MsRUFDdEMscUNBQXFDLEVBQ3JDLDBCQUEwQixFQUMxQixxQkFBcUIsRUFDckIsb0JBQW9CLEdBQ3JCLE1BQU0sMkJBQTJCLENBQUM7QUFDbkMsT0FBTyxFQUFZLFNBQVMsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQzFELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQzFELE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNoRCxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxZQUFZLENBQUM7QUFDL0MsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFFekQ7OztHQUdHO0FBQ0gsTUFBTSxPQUFPLDBCQUEwQjtJQUNyQztJQUNFOztPQUVHO0lBQ0ksV0FBd0I7SUFDL0I7O09BRUc7SUFDSSxRQUFZO0lBQ25COztPQUVHO0lBQ0ksWUFBb0Q7SUFDM0Q7O09BRUc7SUFDSSxZQUEwRDtJQUNqRTs7T0FFRztJQUNJLG1CQUF5RTtJQUNoRjs7T0FFRztJQUNJLGNBQThEO0lBQ3JFOztPQUVHO0lBQ0ksYUFBNEQ7SUFDbkU7O09BRUc7SUFDSSxvQkFBbUU7SUFDMUU7O09BRUc7SUFDSSxnQkFBMEU7SUFDakY7O09BRUc7SUFDSSxlQUF3RTtJQUMvRTs7T0FFRztJQUNJLGFBQStEO0lBQ3RFOzs7T0FHRztJQUNJLGlCQUEwRDtJQUNqRTs7O09B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